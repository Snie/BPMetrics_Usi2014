<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-icon-button/core-icon-button.html">
<script src="../bower_components/chartjs/Chart.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">

<polymer-element name="statistic-card" attributes="post side oGraph">
<template>
    <style>
        :host {
            /*box-shadow: 0 0 1px #000000;*/
            border-radius: 3px;
            display: block;
            position: relative;
            background-color: white;
            padding: 20px;
            width: 275px;
            height: 275px;
            font-size: 1.2rem;
            font-weight: 300;
            margin:10px;
        }
        polyfill-next-selector { content: '.card-header h2'; }
        .card-header ::content h2 {
            margin: 0;
            font-size: 100%;
            font-weight: 300;
        }
        core-icon-button {
            position: absolute;
            top: 2px;
            right: 2px;
            padding:2px;
            color: #636363;
        }
        :host([favorite]) core-icon-button {
            color: #da4336;
        }
        #front{
            display: block;
        }
        #back{
            display: none;
        }

    </style>


    <div id="front">
        <div class="card-header" layout horizontal center>
            <content select="h2"></content>
        </div>

        <core-icon-button icon="settings" on-tap="{{settingsTapped}}"></core-icon-button>


        <canvas class="cc" id="canvas" width="300" height="200"></canvas>

    </div>

    <div id="back">
        <core-icon-button icon="clear" on-tap="{{settingsTapped}}"></core-icon-button>
        <paper-dropdown-menu label="Your favorite pastry">
            <paper-dropdown class="dropdown">
                <core-menu class="menu">
                    <paper-item>Croissant</paper-item>
                    <paper-item>Donut</paper-item>
                    <paper-item>Financier</paper-item>
                    <paper-item>Madeleine</paper-item>
                </core-menu>
            </paper-dropdown>
        </paper-dropdown-menu>
        <p>hello</p>
    </div>

</template>


<script>
    Polymer('statistic-card', {
        ready: function() {
//                if(this.post.value = []){
//                    this.style.borderBottom = 'solid 4px blue';
//                }
            this.side = true;
//                var t = this.$.canvas;
//
//                var ctx = t.getContext("2d");
//
//                var labels = [];
//                var datas = [];
//                var chartOpt = {};
//                var data = {};
//
//
//                if(this.post.type == 'DISTRIBUTION'){
//
//                    for(var i = 0; i < this.post.values.length; i++){
//                        labels.push(this.post.values[i].name);
//                        datas.push(this.post.values[i].value);
//                    }
//
//
//
//                    data = {
//                        labels: labels,
//                        datasets: [
//                            {
//                                label: "First dataset",
//                                fillColor: "rgba(220,220,220,0.5)",
//                                strokeColor: "rgba(220,220,220,0.8)",
//                                highlightFill: "rgba(220,220,220,0.75)",
//                                highlightStroke: "rgba(220,220,220,1)",
//                                data: datas
//                            }
//                        ]
//                    };
//
//
//
//                    chartOpt = {
//                        scaleOverride : true,
//                        scaleSteps : 10,
//                        scaleStepWidth : 1,
//                        animation : false  // Edit: correction typo: from 'animated' to 'animation'
//                    };
//
//                    myBarChart = new Chart(ctx).Bar(data, chartOpt);
//                }
//                else if(this.post.type == 'SINGLE_VALUE'){
//
//                    for(var i = 0; i < this.post.values.length; i++){
//                        labels.push('value');
//                        datas.push(this.post.values[i].value);
//                    }
//
//                    data = {
//                        labels: labels,
//                        datasets: [
//                            {
//                                label: "First dataset",
//                                fillColor: "rgba(220,220,220,0.5)",
//                                strokeColor: "rgba(220,220,220,0.8)",
//                                highlightFill: "rgba(220,220,220,0.75)",
//                                highlightStroke: "rgba(220,220,220,1)",
//                                data: datas
//                            }
//                        ]
//                    };
//
//
//
//                    chartOpt = {
//                        scaleOverride : true,
//                        scaleSteps : 10,
//                        scaleStepWidth : 1,
//                        animation : false  // Edit: correction typo: from 'animated' to 'animation'
//                    };
//
//                    var myBarChart = new Chart(ctx).Bar(data, chartOpt);
//                }
//                else if(this.post.type == 'TYPE_DISTRIBUTION'){
//
//                    for(var i = 0; i < this.post.values.length; i++){
//                        labels.push('value');
//                        datas.push(this.post.values[i].value);
//                    }
//
//                    data = {
//                        labels: labels,
//                        datasets: [
//                            {
//                                label: "First dataset",
//                                fillColor: "rgba(220,220,220,0.5)",
//                                strokeColor: "rgba(220,220,220,0.8)",
//                                highlightFill: "rgba(220,220,220,0.75)",
//                                highlightStroke: "rgba(220,220,220,1)",
//                                data: datas
//                            }
//                        ]
//                    };
//
//
//
//                    chartOpt = {
//                        scaleOverride : true,
//                        scaleSteps : 10,
//                        scaleStepWidth : 1,
//                        animation : false  // Edit: correction typo: from 'animated' to 'animation'
//                    };
//
//                    var myBarChart = new Chart(ctx).Bar(data, chartOpt);
//                }
//
//
//
//
        },
        settingsTapped: function(event, detail, sender){
            console.log(this.side);
            if(!this.side){
                this.$.front.style.display = 'block';
                this.$.back.style.display = 'none';
                this.side = !this.side;
            }
            else{
                this.$.front.style.display = 'none';
                this.$.back.style.display = 'block';
                this.side = !this.side;
            }
        }
    });
</script>

</polymer-element>